---
sidebar: sidebar 
permalink: vcp_task_volumes_manage.html 
summary: NetApp Element Plug-in for VMware vCenter Serverを使用すると、 ボリュームをクローニング、バックアップ、リストアまた、クラスタ上の各ボリュームの管理や、ボリュームアクセスグループのボリュームの追加と削除も可能です。 
keywords: netapp, volumes, vcp, vcenter, element, 
---
= ボリュームを管理します
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
NetApp Element Plug-in for VMware vCenter Serverrを使用すると、 ユーザアカウントのボリュームをクローニング、バックアップ、またはリストアする。また、クラスタ上の各ボリュームの管理や、ボリュームアクセスグループのボリュームの追加と削除も可能です。

.オプション（ Options ）
*  a volume
*  volume details
*  a volume
*  a volume
*  up or restore volumes
*  volumes
*  volumes
*  deleted volumes




== ボリュームを作成します

新しいボリュームを作成し、そのボリュームを指定したアカウントに関連付けることができます（すべてのボリュームをアカウントに関連付ける必要があります）。この関連付けにより、アカウントは、 iSCSI イニシエータ経由で CHAP クレデンシャルを使用してボリュームにアクセスできます。作成中にボリュームの QoS 設定を指定することもできます。

VMware ではディスクリソースに 512e が必要です。512e が有効になっていないと VMFS は作成できません。

.必要なもの
* クラスタが少なくとも 1 つ追加されて実行されている必要があります。
* ユーザアカウントが作成されている必要があります。


.手順
. NetApp Element Management*>* Management* を選択します。
. 複数のクラスタが追加されている場合は、このタスクに使用するクラスタをナビゲーションバーで選択します。
. [* Volumes （ボリューム） ] サブタブを選択します。
. アクティブ * 表示から、 * ボリュームの作成 * を選択します。
. ボリュームの名前を入力します。
+

TIP: わかりやすい名前のベストプラクティスを使用してください。これは、環境で複数のクラスタや vCenter Server を使用している場合に特に重要です。

. 作成するボリュームの合計サイズを入力します。
+

NOTE: デフォルトで選択されているボリュームサイズの単位は GB です。ボリュームは、 GB または GiB 単位のサイズを使用して作成できます。 1GB = 1 000 000 000 バイト 1GiB = 1 073 741 824 バイト

+

NOTE: デフォルトでは、すべての新しいボリュームについて、 512 バイトエミュレーションが ON に設定されます。VMware ではディスクリソースに 512e が必要です。512e が有効になっていないと VMFS は作成できません。

. 「 * アカウント * 」リストからユーザーアカウントを選択します。
. [* Quality of Service* （サービス品質 * ） ] 領域で、次のいずれかを実行します。
+
** 「 * Policy 」で、既存の QoS ポリシーがある場合は選択します。
** カスタム設定 * で、 IOPS の最小値、最大値、バースト値をカスタマイズするか、デフォルトの QoS 値を使用します。
+

IMPORTANT: QoS ポリシーは、データベースサーバ、アプリケーションサーバ、インフラサーバなど、ほとんどリブートされずにストレージへの常時アクセスが必要となるサービス環境に最適です。カスタム QoSSIOC 自動化は、仮想デスクトップや専用キオスクタイプの VM など、毎日または数回、リブート、電源オン、電源オフが可能な軽量の VM に最適です。QoSSIOC 自動化ポリシーと QoS ポリシーを一緒に使用しないでください。データストアの QoSSIOC 設定を有効にすると、ボリュームレベルの QoS 設定よりも優先されます。最大 IOPS またはバースト IOPS の値が 20 、 000 IOPS を超える場合、単一のボリュームでこのレベルの IOPS を実現するには、キュー深度を深くするか、複数のセッションが必要になる場合があります。



. 「 * OK 」を選択します。




== ボリュームの詳細を表示します

NetApp Element Management 拡張ポイントでは、クラスタ上のすべてのアクティブボリュームに関する全般的な情報を確認できます。効率化、パフォーマンス、 QoS 、関連付けられた Snapshot など、アクティブなボリュームごとの詳細も確認できます。

. NetApp Element 管理 > 管理 * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. * Volumes * サブタブをクリックします。
+
アクティブボリュームに関する全般的な情報が表示されます。

. 特定のボリュームをチェックします。
. [ * アクション * ] を選択します。
. 「 * 詳細を表示 * 」を選択します。
. 次の点について確認
+
** * Volume ID * ：システムによって生成されたボリュームの ID 。
** * ボリューム名 * ：ボリュームに割り当てられた名前。
** * Account * ：ボリュームに割り当てられているアカウントの名前。
** * アクセスグループ * ：ボリュームが属するボリュームアクセスグループの名前。
** * アクセス * ：ボリュームの作成時に割り当てられたアクセスのタイプ。
+
有効な値は次のとおり

+
*** Read/Write ：すべての読み取りと書き込みが許可されます。
*** Read Only ：すべての読み取りアクティビティが許可されます。書き込みは許可されません。
*** 「ロック」：管理者アクセスのみが許可されます。
*** ReplicationTarget ：レプリケートされたボリュームペアのターゲットボリュームとして指定されます。


** * ペアリングされているボリューム * ：ボリュームがペアリングされているかどうかを示します。
** * サイズ（ GB ） * ：ボリュームの合計サイズ（ GB ）。
** * Snapshots * ：ボリュームに対して作成された Snapshot の数。
** * QoS Policy * ：ユーザ定義の QoS ポリシーの名前。
** * 512e * ：ボリュームで 512e が有効になっているかどうか。値は、 Yes または No のいずれかです


. 次のセクションに記載されている特定のボリュームの詳細を確認します。
+
**  Details section
**  section
**  section
**  of Service section
**  section






=== General Details セクション

* * 名前 * ：ボリュームに割り当てられた名前。
* * Volume ID * ：システムによって生成されたボリュームの ID 。
* *IQN* ：ボリュームの iSCSI Qualified Name 。
* * アカウント ID * ：関連付けられたアカウントの一意のアカウント ID 。
* * Account * ：ボリュームに割り当てられているアカウントの名前。
* * アクセスグループ * ：ボリュームが属するボリュームアクセスグループの名前。
* * サイズ * ：ボリュームの合計サイズ（バイト）。
* * ペアリングされているボリューム * ：ボリュームがペアリングされているかどうかを示します。
* * SCSI EUI Device ID * ： EUI-64 ベースの 16 バイト形式で、ボリュームに割り当てられたグローバル一意の SCSI デバイス ID 。
* *SCSI NAA デバイス ID*: NAA IEEE Registered Extended Format でのプロトコルエンドポイントのグローバル一意 SCSI デバイス識別子。




=== 効率セクション

* * Compression * ：このボリュームの圧縮による削減率。
* * 重複排除機能 * ：ボリュームの重複排除による削減率。
* * シンプロビジョニング * ：ボリュームのシンプロビジョニングによる削減率。
* * Last Updated * ：前回の効率化スコアの日時。




=== パフォーマンスセクション

* * アカウント ID * ：関連付けられたアカウントの一意のアカウント ID 。
* * Actual IOPS * ：過去 500 ミリ秒の、ボリュームに対する実際の IOPS 。
* * Async Delay* ：ボリュームが最後にリモートクラスタと同期されてからの時間。
* * 平均 IOP サイズ * ：過去 500 ミリ秒における、ボリュームへの最近の I/O の平均サイズ（バイト）。
* * Burst IOPS Size * ：ユーザが使用できる IOP クレジットの合計数。ボリュームが最大 IOPS に到達していない場合、クレジットは蓄積されます。
* * クライアントキュー深度 * ：ボリュームに対する未処理の読み取り処理と書き込み処理の数。
* * 最終更新日 * ：パフォーマンスが最後に更新された日時。
* * Latency usec * ：過去 500 ミリ秒以内にボリュームへの処理が完了するまでの平均時間（マイクロ秒）。値「 0 」（ゼロ）は、ボリュームに対する I/O がないことを示します。
* * ゼロ以外のブロック * ：前回のガベージコレクション完了後、データが含まれる 4KiB ブロックの総数。
* * パフォーマンス利用率 * ：消費されているクラスタ IOPS の割合。たとえば、 25 万 IOPS のクラスタが 10 万 IOPS で実行されている場合、消費率は 40% です。
* * Read Bytes * ：ボリューム作成以降にボリュームから読み取られた累積バイト数の合計。
* * Read Latency usec * ：過去 500 ミリ秒のボリュームへの読み取り処理が完了するまでの平均時間（マイクロ秒）。
* * Read Operations * ：ボリューム作成以降の、ボリュームに対する読み取り処理の合計数。
* * シンプロビジョニング * ：ボリュームのシンプロビジョニングによる削減率。
* * スロットル * ： 0~1 の浮動小数点数。データの再レプリケーション、一時的なエラー、 Snapshot の作成のために、クライアントの処理量を maxIOPS 未満に抑えている割合。
* * Total Latency usec * ：ボリュームへの読み取りおよび書き込み処理を完了するまでの時間（マイクロ秒）。
* * アラインされていない読み取り * ： 512e ボリュームの場合、 4k セクターの境界に沿っていない読み取り処理の数。アラインされていない読み取りが多数ある場合は、パーティションのアライメントが適切でない可能性
* * アラインされていない書き込み * ： 512e ボリュームの場合、 4k セクターの境界に沿っていない書き込み処理の数。アラインされていない書き込みが多数ある場合は、パーティションのアライメントが適切でない可能性
* * 使用容量 * ：使用済み容量の割合。
* * Volume ID * ：システムによって生成されたボリュームの ID 。
* * ボリュームアクセスグループ * ：ボリュームに関連付けられたボリュームアクセスグループ ID 。
* * Volume Utilization * ：ボリュームを使用しているクライアントの割合を示す値。有効な値は次のとおり
+
** 0 ：クライアントはボリュームを使用していません。
** 100 ：クライアントは最大値まで使用しています
** >100 ：クライアントはバースト値を使用しています。


* * Write Bytes * ：ボリューム作成以降にボリュームに書き込まれた累積バイト数の合計。
* * Write Latency usec * ：過去 500 ミリ秒以内にボリュームへの書き込み処理を完了するまでの平均時間（マイクロ秒）。
* * Write Operations * ：ボリューム作成以降の、ボリュームに対して行った書き込み処理の累積総数。
* * ゼロブロック * ：前回のガベージコレクション完了後、データが含まれない 4KiB ブロックの総数。




=== Quality of Service セクションの略

* * Policy * ：ボリュームに割り当てられている QoS ポリシーの名前。
* * I/O サイズ * ： IOPS のサイズ（ KB ）。
* * Min IOPS * ：クラスタがボリュームに提供する平常時の最小 IOPS 。ボリュームに設定された Min IOPS は、そのボリュームに対して最低限保証されるパフォーマンスレベルです。パフォーマンスがこのレベルを下回ることはありません。
* * 最大 IOPS * ：クラスタがボリュームに提供する平常時の最大 IOPS 。クラスタの IOPS レベルが非常に高い場合も、 IOPS パフォーマンスはこのレベル以下に抑えられます。
* * Burst IOPS * ：短時間のバースト時に許容される最大 IOPS 。ボリュームが Max IOPS 未満で動作している間は、バーストクレジットが蓄積されます。パフォーマンスレベルが非常に高くなって最大レベルに達した場合、ボリュームで IOPS の短時間のバーストが許容されます。
* * Max Bandwidth * ：ブロックサイズを大きく処理するためにシステムで許容される最大帯域幅。




=== Snapshot セクション

* * Snapshot ID * ：システムによって生成された Snapshot の ID 。
* * Snapshot 名 * ： Snapshot のユーザ定義名。
* * 作成日 * ： Snapshot が作成された日時。
* * 有効期限 * ： Snapshot が削除される日時。
* * サイズ * ：ユーザーが定義したスナップショットのサイズ（ GB 単位）。




== ボリュームを編集します

QoS 値、ボリュームのサイズ、バイト値の算出単位など、ボリュームの属性を変更できます。また、アクセスレベルやボリュームにアクセスできるアカウントを変更することもできます。レプリケーションで使用するため、またはボリュームへのアクセスを制限するために、アカウントアクセスを変更することもできます。

管理ノードに永続ボリュームを使用している場合は、永続ボリュームの名前を変更しないでください。

. NetApp Element 管理 > 管理 * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. * Volumes * サブタブをクリックします。
. 「 * Active * 」ビューで音量を確認します。
. [ * アクション * ] を選択します。
. 「 * 編集 * 」を選択します。
. * オプション * ： * Volume Size * フィールドに、 GB または GiB 単位で異なるボリュームサイズを入力します。
+

NOTE: ボリュームのサイズは、増やすことはできますが、減らすことはできません。レプリケーション用にボリュームサイズを調整する場合は、最初にレプリケーションターゲットとして割り当てられているボリュームのサイズを拡張する必要があります。次に、ソースボリュームのサイズを変更します。ターゲットボリュームのサイズは、ソースボリュームと同じかそれ以上のサイズにすることはできますが、ソースボリュームより小さくすることはできません。

. * オプション * ：別のユーザアカウントを選択します。
. * オプション * ：次のいずれかのアクセスレベルを選択します。
+
** 読み取り / 書き込み
** 読み取り専用です
** ロック済み
** レプリケーションターゲット


. [* Quality of Service* （サービス品質 * ） ] 領域で、次のいずれかを実行します。
+
** 既存の QoS ポリシーがある場合は、 Policy （ポリシー）で選択します。
** カスタム設定で、 IOPS の最小値、最大値、バースト値をカスタマイズするか、デフォルトの QoS 値を使用します。
+

TIP: * ベストプラクティス * ： IOPS 値を変更する場合は、 10 または 100 の単位で増分します。入力値には有効な整数を指定する必要があります。ボリュームのバースト値はできるだけ高くします。バースト値を非常に高く設定することで、たまに発生する大規模ブロックのシーケンシャルワークロードを迅速に処理できる一方で、平常時の IOPS は引き続き抑制することができます。



+

IMPORTANT: QoS ポリシーは、データベースサーバ、アプリケーションサーバ、インフラサーバなど、ほとんどリブートされずにストレージへの常時アクセスが必要となるサービス環境に最適です。カスタム QoSSIOC 自動化は、仮想デスクトップや専用キオスクタイプの VM など、毎日または数回、リブート、電源オン、電源オフが可能な軽量の VM に最適です。QoSSIOC 自動化ポリシーと QoS ポリシーを一緒に使用しないでください。データストアの QoSSIOC 設定を有効にすると、ボリュームレベルの QoS 設定よりも優先されます。最大 IOPS またはバースト IOPS の値が 20 、 000 IOPS を超える場合、単一のボリュームでこのレベルの IOPS を実現するには、キュー深度を深くするか、複数のセッションが必要になる場合があります。

. 「 * OK 」を選択します。




== ボリュームのクローンを作成します

ボリュームのクローンを作成して、データのポイントインタイムコピーを作成できます。ボリュームをクローニングすると、ボリュームの Snapshot が作成され、次にその Snapshot が参照しているデータのコピーが作成されます。これは非同期のプロセスであり、クローニングするボリュームのサイズおよび現在のクラスタの負荷によって所要時間が異なります。

.必要なもの
* クラスタが少なくとも 1 つ追加されて実行されている必要があります。
* ボリュームを少なくとも 1 つ作成しておく必要があります。
* 少なくとも 1 つのユーザアカウントを作成する必要があります。
* ソースボリュームのサイズと同じかそれ以上のプロビジョニングされていない利用可能なスペースが必要です。


クラスタでは、ボリュームあたり一度に実行できるクローン要求は最大 2 つ、アクティブなボリュームのクローン処理は最大 8 件までサポートされます。これらの制限を超える要求はキューに登録され、あとで処理されます。


NOTE: クローンボリュームには、ソースボリュームのボリュームアクセスグループメンバーシップは継承されません。

オペレーティングシステムによって、クローニングされたボリュームの処理方法が異なります。ESXi では、クローンボリュームはボリュームコピーまたは Snapshot ボリュームとして扱われます。新しいデータストアの作成に使用できるデバイスがボリュームになります。クローンボリュームのマウントと Snapshot LUN の処理の詳細については、 VMware のドキュメントを参照してください https://docs.vmware.com/en/VMware-vSphere/6.7/com.vmware.vsphere.storage.doc/GUID-EEFEB765-A41F-4B6D-917C-BB9ABB80FC80.html["VMFS データストアのコピーをマウントしています"] および https://docs.vmware.com/en/VMware-vSphere/6.7/com.vmware.vsphere.storage.doc/GUID-EBAB0D5A-3C77-4A9B-9884-3D4AD69E28DC.html["重複する VMFS データストアの管理"]。

.手順
. NetApp Element 管理 > 管理 * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. クローニングするボリュームを選択します。
. [ * アクション * ] を選択します。
. 「 * Clone * 」を選択します。
. 新しいクローンボリュームのボリューム名を入力します。
+

TIP: わかりやすい名前のベストプラクティスを使用してください。これは、環境で複数のクラスタや vCenter Server を使用している場合に特に重要です。

. クローンボリュームのサイズ（ GB または GIB ）を選択します。
+
デフォルトで選択されているボリュームサイズの単位は GB です。GB または GiB 単位のサイズを使用してボリュームを作成できます。

+
** 1GB=1 、 000 、 000 、 000 バイト
** 1GiB=1 、 073 、 741 、 824 バイトです
+
クローンのボリュームサイズを拡張すると、末尾に空きスペースが追加された新しいボリュームが作成されます。ボリュームの使用方法によっては、新しい空きスペースを使用するために、空きスペースでパーティションの拡張または新しいパーティションの作成が必要になる場合があります。



. 新しいクローンボリュームに関連付けるアカウントを選択します。
. 新しいクローンボリュームのアクセスタイプとして次のいずれかを選択します。
+
** 読み取り / 書き込み
** 読み取り専用です
** ロック済み


. 必要に応じて 512e の設定を調整します。
+

NOTE: デフォルトでは、すべての新しいボリュームについて、 512 バイトエミュレーションが有効になります。VMware ではディスクリソースに 512e が必要です。512e が有効になっていないと VMFS は作成できず、ボリュームの詳細はグレー表示になります。

. 「 * OK 」を選択します。
+

NOTE: クローニング処理が完了するまでの時間は、ボリュームサイズおよび現在のクラスタの負荷によって異なります。クローンボリュームがボリュームリストに表示されない場合は、ページを更新してください。





== ボリュームのバックアップまたはリストア

NetApp Element ソフトウェアベースのストレージの外部にあるオブジェクトストアコンテナとの間でボリュームの内容をバックアップおよびリストアするようにシステムを設定できます。

リモートの NetApp Element ソフトウェアベースのシステムとの間でデータをバックアップおよびリストアすることもできます。1 つのボリューム上で、一度に最大 2 つのバックアップまたはリストアのプロセスを実行できます。



=== ボリュームをバックアップ

NetApp Element ボリュームは、 Element ストレージ、および Amazon S3 または OpenStack Swift と互換性のあるセカンダリオブジェクトストアにバックアップできます。



==== Amazon S3 オブジェクトストアにボリュームをバックアップします

Amazon S3 と互換性のある外部のオブジェクトストアに NetApp Element ボリュームをバックアップできます。

. NetApp Element 管理 > 管理 * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. * Volumes * サブタブを選択します。
. 「 * Active * 」ビューで音量を確認します。
. [ * アクション * ] を選択します。
. 「バックアップ先 * 」を選択します。
. [ ボリュームのバックアップ先 * ] で、 [* Amazon S3 * ] を選択します。
. 次のデータ形式でのオプションを選択します。
+
** Native ： NetApp Element ソフトウェアベースのストレージシステムのみが読み取り可能な圧縮形式。
** Uncompressed ：他のシステムと互換性がある非圧縮形式。


. [ * ホスト名 * ] フィールドに、オブジェクトストアへのアクセスに使用するホスト名を入力します。
. [Access key ID*] フィールドに、アカウントのアクセスキー ID を入力します。
. 「 * Secret access key * 」フィールドに、アカウントのシークレットアクセスキーを入力します。
. Amazon S3 バケット * フィールドに、バックアップを格納する S3 バケットを入力します。
. * オプション * ： * Prefix * フィールドにバックアップ・ボリューム名のプレフィックスを入力します。
. * オプション * ： * Nametag * フィールドに、プレフィックスに付加するネームタグを入力します。
. 「 * OK 」を選択します。




==== OpenStack Swift オブジェクトストアにボリュームをバックアップします

OpenStack Swift と互換性のある外部のオブジェクトストアに NetApp Element ボリュームをバックアップできます。

. NetApp Element 管理 > 管理 * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. * Volumes * サブタブを選択します。
. 「 * Active * 」ビューで音量を確認します。
. [ * アクション * ] を選択します。
. 「バックアップ先 * 」を選択します。
. ボリュームのバックアップ先 * で、 * OpenStack Swift * を選択します。
. 次のデータ形式でのオプションを選択します。
+
** Native ： NetApp Element ソフトウェアベースのストレージシステムのみが読み取り可能な圧縮形式。
** Uncompressed ：他のシステムと互換性がある非圧縮形式。


. [* URL] フィールドに、オブジェクトストアへのアクセスに使用する URL を入力します。
. [* ユーザー名 *] フィールドに、アカウントのユーザー名を入力します。
. [* Authentication key*] フィールドに、アカウントの認証キーを入力します。
. [* Container * （コンテナ * ） ] フィールドに、バックアップを保存するコンテナを入力します。
. * オプション * ： * Prefix * フィールドにバックアップ・ボリューム名のプレフィックスを入力します。
. * オプション * ： * Nametag * フィールドに、プレフィックスに付加するネームタグを入力します。
. 「 * OK 」を選択します。




==== Element ソフトウェアを実行しているクラスタにボリュームをバックアップします

NetApp Element ソフトウェアを実行しているクラスタにあるボリュームをリモートの Element クラスタにバックアップできます。

クラスタ間でバックアップまたはリストアを実行する際には、システムによってクラスタ間の認証に使用するキーが生成されます。

ソースクラスタはこのボリュームの一括書き込みキーを使用してデスティネーションクラスタに対して認証し、デスティネーションボリュームへの書き込みがセキュリティで保護されます。バックアップまたはリストアのプロセスでは、処理を開始する前に、デスティネーションボリュームからボリュームの一括書き込みキーを生成する必要があります。

これは 2 部構成の手順です。

* （デスティネーション）バックアップボリュームを設定
* （ソース）ボリュームをバックアップします


.バックアップボリュームをセットアップ
. ボリューム・バックアップを配置する vCenter およびクラスタから、 * NetApp Element Management > Management * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. * Volumes * サブタブを選択します。
. 「 * Active * 」ビューで音量を確認します。
. [ * アクション * ] を選択します。
. 「 * リストア元 * 」を選択します。
. [ * リストア元 * ] で、 [ * NetApp Element * ] を選択します。
. 次のデータ形式でのオプションを選択します。
+
** Native ： NetApp Element ソフトウェアベースのストレージシステムのみが読み取り可能な圧縮形式。
** Uncompressed ：他のシステムと互換性がある非圧縮形式。


. Generate Key （キーの生成） * をクリックして、宛先ボリュームの一括ボリューム書き込みキーを生成します。
. ボリュームの一括書き込みキーをクリップボードにコピーします。これは以降のソースクラスタの手順で使用します。


.ボリュームをバックアップします
. バックアップに使用するソース・ボリュームを含む vCenter およびクラスタから、 * NetApp Element Management > Management * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. * Volumes * サブタブを選択します。
. 「 * Active * 」ビューで音量を確認します。
. [ * アクション * ] を選択します。
. 「バックアップ先 * 」を選択します。
. 「 * 音量を * にバックアップ」で、「 * NetApp Element * 」を選択します。
. デスティネーションクラスタと同じオプションを、次のデータ形式で選択します。
+
** Native ： NetApp Element ソフトウェアベースのストレージシステムのみが読み取り可能な圧縮形式。
** Uncompressed ：他のシステムと互換性がある非圧縮形式。


. Remote cluster MVIP * フィールドに、デスティネーションボリュームのクラスタの管理仮想 IP アドレスを入力します。
. リモートクラスタのユーザ名 * フィールドに、デスティネーションクラスタのクラスタ管理者のユーザ名を入力します。
. リモートクラスタのユーザパスワード * フィールドに、デスティネーションクラスタのクラスタ管理者のパスワードを入力します。
. 「 * Bulk volume write key * 」フィールドに、生成したキーをデスティネーションクラスタに貼り付けます。
. 「 * OK 」を選択します。




=== ボリュームをリストア

OpenStack Swift や Amazon S3 などのオブジェクトストアにあるバックアップからボリュームをリストアするときは、元のバックアッププロセスのマニフェスト情報が必要です。NetApp Element ベースのストレージシステムにバックアップされている NetApp Element ボリュームをリストアする場合、マニフェスト情報は不要です。Swift および S3 からのリストアに必要なマニフェスト情報は、 Reporting タブのイベントログで確認できます。



==== Amazon S3 オブジェクトストア上のバックアップからボリュームをリストアする

プラグインを使用して、 Amazon S3 オブジェクトストア上のバックアップからボリュームをリストアできます。

. ［ * NetApp Element 管理 ］ > ［ レポート作成 * ］ を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. [ * イベントログ * ] サブタブを選択します。
. リストアする必要のあるバックアップを作成したバックアップイベントを選択します。
. イベントの [*Details*] を選択します。
. 「 * 詳細を表示 * 」を選択します。
. マニフェスト情報をクリップボードにコピーします。
. [* Management] > [Volumes] を選択します。
. 「 * Active * 」ビューで音量を確認します。
. [ * アクション * ] を選択します。
. 「 * リストア元 * 」を選択します。
. * リストア元 * で、 * Amazon S3 * を選択します。
. 次のデータ形式のオプションを選択します。
+
** Native ： NetApp Element ソフトウェアベースのストレージシステムのみが読み取り可能な圧縮形式。
** Uncompressed ：他のシステムと互換性がある非圧縮形式。


. [ * ホスト名 * ] フィールドに、オブジェクトストアへのアクセスに使用するホスト名を入力します。
. [Access key ID*] フィールドに、アカウントのアクセスキー ID を入力します。
. 「 * Secret access key * 」フィールドに、アカウントのシークレットアクセスキーを入力します。
. Amazon S3 バケット * フィールドに、バックアップが格納されている S3 バケットを入力します。
. マニフェスト情報を * Manifest * フィールドに貼り付けます。
. 「 * OK 」を選択します。




==== OpenStack Swift オブジェクトストア上のバックアップからボリュームをリストアします

プラグインを使用して、 OpenStack Swift オブジェクトストア上のバックアップからボリュームをリストアできます。

. ［ * NetApp Element 管理 ］ > ［ レポート作成 * ］ を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. [ * イベントログ * ] サブタブを選択します。
. リストアする必要のあるバックアップを作成したバックアップイベントを選択します。
. イベントの [*Details*] を選択します。
. 「 * 詳細を表示 * 」を選択します。
. マニフェスト情報をクリップボードにコピーします。
. [* Management] > [Volumes] を選択します。
. 「 * Active * 」ビューで音量を確認します。
. [ * アクション * ] を選択します。
. 「 * リストア元 * 」を選択します。
. * リストア元 * で、 * OpenStack Swift * を選択します。
. 次のデータ形式のオプションを選択します。
+
** Native ： NetApp Element ソフトウェアベースのストレージシステムのみが読み取り可能な圧縮形式。
** Uncompressed ：他のシステムと互換性がある圧縮形式。


. [* URL] フィールドに、オブジェクトストアへのアクセスに使用する URL を入力します。
. [* ユーザー名 *] フィールドに、アカウントのユーザー名を入力します。
. [* Authentication key*] フィールドに、アカウントの認証キーを入力します。
. [* Container * （コンテナ * ） ] フィールドに、バックアップが保存されているコンテナの名前を入力します。
. マニフェスト情報を * Manifest * フィールドに貼り付けます。
. 「 * OK 」を選択します。




==== Element ソフトウェアを実行しているクラスタ上のバックアップからボリュームをリストアする

NetApp Element ソフトウェアを実行しているクラスタ上のバックアップからボリュームをリストアできます。クラスタ間でバックアップまたはリストアを実行する際には、システムによってクラスタ間の認証に使用するキーが生成されます。ソースクラスタはこのボリュームの一括書き込みキーを使用してデスティネーションクラスタに対して認証し、デスティネーションボリュームへの書き込みがセキュリティで保護されます。バックアップまたはリストアのプロセスでは、処理を開始する前に、デスティネーションボリュームからボリュームの一括書き込みキーを生成する必要があります。

これは 2 部構成の手順です。

* （デスティネーションクラスタ）リストアに使用するボリュームを選択します
* （ソースクラスタ）ボリュームをリストアします


.リストアに使用するボリュームを選択します
. ボリュームをリストアする vCenter およびクラスタで、 * NetApp Element Management > Management * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. * Volumes * サブタブを選択します。
. 「 * Active * 」ビューで音量を確認します。
. [ * アクション * ] を選択します。
. 「 * リストア元 * 」を選択します。
. [ * リストア元 * ] で、 [ * NetApp Element * ] を選択します。
. 次のデータ形式でのオプションを選択します。
+
** Native ： NetApp Element ソフトウェアベースのストレージシステムのみが読み取り可能な圧縮形式。
** Uncompressed ：他のシステムと互換性がある非圧縮形式。


. Generate Key （キーの生成） * をクリックして、宛先ボリュームの一括ボリューム書き込みキーを生成します。
. ボリュームの一括書き込みキーをクリップボードにコピーします。これは以降のソースクラスタの手順で使用します。


.ボリュームをリストアします
. リストアに使用するソース・ボリュームを含む vCenter およびクラスタから、 * NetApp Element Management > Management * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. * Volumes * サブタブを選択します。
. 「 * Active * 」ビューで音量を確認します。
. [ * アクション * ] を選択します。
. 「バックアップ先 * 」を選択します。
. 「 * 音量を * にバックアップ」で、「 * NetApp Element * 」を選択します。
. 次のデータ形式に一致するバックアップオプションを選択します。
+
** Native ： NetApp Element ソフトウェアベースのストレージシステムのみが読み取り可能な圧縮形式。
** Uncompressed ：他のシステムと互換性がある非圧縮形式。


. Remote cluster MVIP * フィールドに、デスティネーションボリュームのクラスタの管理仮想 IP アドレスを入力します。
. リモートクラスタのユーザ名 * フィールドに、デスティネーションクラスタのクラスタ管理者のユーザ名を入力します。
. リモートクラスタのユーザパスワード * フィールドに、デスティネーションクラスタのクラスタ管理者のパスワードを入力します。
. 「 * Bulk volume write key * 」フィールドに、生成したキーをデスティネーションクラスタに貼り付けます。
. 「 * OK 」を選択します。




== ボリュームを削除します

NetApp Element Management 拡張ポイントを使用して、 NetApp Element クラスタから 1 つ以上のボリュームを削除できます。

削除したボリュームはすぐにパージされるわけではありません。ボリュームを削除したあと約 8 時間はリストア可能です。

システムによってパージされる前にボリュームをリストアできます。また、 * Management * > * Volumes * の削除済みビューから手動でボリュームをパージできます。ボリュームをリストアすると、そのボリュームがオンラインに戻り、 iSCSI 接続を再度確立できます。


IMPORTANT: 管理サービスに関連付けられた永続ボリュームが作成され、インストールまたはアップグレード時に新しいアカウントに割り当てられます。永続ボリュームを使用している場合は、ボリュームや関連付けられているアカウントを変更または削除しないでください。


IMPORTANT: スナップショットの作成に使用されたボリュームが削除されると、関連付けられているスナップショットは、 Protection > Snapshots ページの Inactive ビューに表示されます。削除したソースボリュームがパージされると、非アクティブビューの Snapshot もシステムから削除されます。

.手順
. NetApp Element 管理 > 管理 * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. * Volumes * サブタブを選択します。
. 1 つ以上のボリュームを削除します。
+
.. 「 * Active * 」ビューで、削除するボリュームを確認します。
.. [ * アクション * ] を選択します。
.. 「 * 削除」を選択します。
+

NOTE: プラグインでは、データストアを含むボリュームは削除できません。



. 操作を確定します。
+
ボリュームがアクティブビューから削除ビューに移動し、ボリュームページが表示されます。





== ボリュームをパージする

削除したボリュームを手動でパージできます。

削除したボリュームは、 8 時間後に自動的にパージされます。ただし、スケジュールされているパージ時刻より前にボリュームをパージする場合は、次の手順に従って手動でパージできます。


IMPORTANT: パージしたボリュームは、システムからただちに完全に削除されます。ボリューム内のデータはすべて失われます。

.手順
. NetApp Element 管理 > 管理 * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. * Volumes * サブタブを選択します。
. ビューフィルタを選択して、リストから [ 削除済み（ * Deleted ） ] を選択します。
. パージするボリュームを 1 つ以上選択します。
. 「 * パージ * 」を選択します。
. 操作を確定します。




== 削除したボリュームをリストアする

NetApp Element システムでは、削除したボリュームのうち、パージされていないボリュームをリストアできます。

削除したボリュームは約 8 時間後に自動的にパージされます。パージ済みのボリュームはリストアできません。


NOTE: 削除したあとにリストアしたボリュームは、 ESXi で検出されません（データストアが存在する場合はデータストアも検出されません）。ESXi iSCSI アダプタから静的ターゲットを削除し、アダプタを再スキャンしてください。

.手順
. NetApp Element 管理 > 管理 * を選択します。
. 複数のクラスタが追加されている場合は、ナビゲーションバーでクラスタを選択します。
. * Volumes * サブタブを選択します。
. ビューフィルタを選択して、リストから [ 削除済み（ * Deleted ） ] を選択します。
. リストアするボリュームを 1 つ以上選択します。
. [* Restore] を選択します。
. ビューフィルタを選択し、リストから * アクティブ * を選択します。
. ボリュームとすべての接続がリストアされたことを確認します。




== 詳細については、こちらをご覧ください

* https://docs.netapp.com/us-en/hci/index.html["NetApp HCI のドキュメント"^]
* https://www.netapp.com/data-storage/solidfire/documentation["SolidFire and Element Resources ページにアクセスします"^]

